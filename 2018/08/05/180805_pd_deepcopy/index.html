
<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>关于pandas.DataFrame.copy()的小坑 | DRAPORLAND</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近发现了一个关于pandas.DataFrame.copy()的小坑，特此小记；">
<meta name="keywords" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="关于pandas.DataFrame.copy()的小坑">
<meta property="og:url" content="http://gabrieldrapor.github.io/2018/08/05/180805_pd_deepcopy/index.html">
<meta property="og:site_name" content="DRAPORLAND">
<meta property="og:description" content="最近发现了一个关于pandas.DataFrame.copy()的小坑，特此小记；">
<meta property="og:image" content="http://7xugq7.com1.z0.glb.clouddn.com/pd_issues.png">
<meta property="og:updated_time" content="2018-08-13T04:34:08.464Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于pandas.DataFrame.copy()的小坑">
<meta name="twitter:description" content="最近发现了一个关于pandas.DataFrame.copy()的小坑，特此小记；">
<meta name="twitter:image" content="http://7xugq7.com1.z0.glb.clouddn.com/pd_issues.png">
  
    <link rel="alternate" href="/atom.xml" title="DRAPORLAND" type="application/atom+xml">
  
  
    <link rel="icon" href="/root/blog/themes/landscape-plus/source/img/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>

<body>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">DRAPORLAND</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">“Witness me.”</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about-me">About me</a>
        
          <a class="main-nav-link" href="/2018-reading-list">Reading List</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="rss_feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://gabrieldrapor.github.io"></form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-180805_pd_deepcopy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/05/180805_pd_deepcopy/" class="article-date">
  <time datetime="2018-08-04T16:00:00.000Z" itemprop="datePublished">2018-08-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      关于pandas.DataFrame.copy()的小坑
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近发现了一个关于pandas.DataFrame.copy()的小坑，特此小记；</p>
<a id="more"></a>
<ul>
<li>我使用的pandas的版本：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">pd._version.get_versions()</div><div class="line"></div><div class="line"><span class="string">"""</span></div><div class="line">&#123;'dirty': False,</div><div class="line"> 'error': None,</div><div class="line"> 'full-revisionid': 'a00154dcfe5057cb3fd86653172e74b6893e337d',</div><div class="line"> 'version': '0.22.0'&#125;</div><div class="line">"""</div></pre></td></tr></table></figure>
<ul>
<li>常规情况：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">a = pd.DataFrame([[<span class="number">1</span>]])</div><div class="line">a.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># 1</span></div><div class="line"></div><div class="line">b = a.copy() <span class="comment">#.copy(deep=True) as default</span></div><div class="line">b.loc[<span class="number">0</span>,<span class="number">0</span>] = <span class="number">2</span></div><div class="line">b.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># 2</span></div><div class="line">a.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># 1</span></div></pre></td></tr></table></figure>
<ul>
<li>进一步：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">a = pd.DataFrame([[[<span class="number">1</span>]]])</div><div class="line">a.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># [1]</span></div><div class="line"></div><div class="line">b = a.copy() <span class="comment">#.copy(deep=True) as default</span></div><div class="line">b.loc[<span class="number">0</span>,<span class="number">0</span>] = [<span class="number">2</span>]</div><div class="line">b.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># [2]</span></div><div class="line">a.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># [1]</span></div></pre></td></tr></table></figure>
<ul>
<li>进而：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">a = pd.DataFrame([[[<span class="number">1</span>]]])</div><div class="line">a.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># [1]</span></div><div class="line"></div><div class="line">b = a.copy() <span class="comment">#.copy(deep=True) as default</span></div><div class="line">b.loc[<span class="number">0</span>,<span class="number">0</span>][<span class="number">0</span>] = <span class="number">2</span></div><div class="line">b.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># [2]</span></div><div class="line">a.loc[<span class="number">0</span>, <span class="number">0</span>] <span class="comment"># [2]</span></div></pre></td></tr></table></figure>
<p>嗯，上面最后一行我没有打错，就是[2]。</p>
<p>想了想出现这种情况的原因，应该是因为即使指定了deep=True，但在复制的时候并对其中的list进行deep copy；</p>
<ul>
<li>其他的发现：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">a = pd.DataFrame([[<span class="number">1</span>]])</div><div class="line">print(a.loc[<span class="number">0</span>][<span class="number">0</span>])</div><div class="line"></div><div class="line">b = a.copy()</div><div class="line">b.loc[<span class="number">0</span>,<span class="number">0</span>] = <span class="number">2</span></div><div class="line">print(b.loc[<span class="number">0</span>, <span class="number">0</span>])  <span class="comment"># 2</span></div><div class="line">print(a.loc[<span class="number">0</span>, <span class="number">0</span>])  <span class="comment"># 1</span></div><div class="line"></div><div class="line">print(a.loc[<span class="number">0</span>,<span class="number">0</span>] <span class="keyword">is</span> b.loc[<span class="number">0</span>,<span class="number">0</span>]) <span class="comment"># False</span></div><div class="line">print(id(a.loc[<span class="number">0</span>,<span class="number">0</span>]) == id(b.loc[<span class="number">0</span>,<span class="number">0</span>])) <span class="comment">#True</span></div><div class="line"></div><div class="line"><span class="comment"># ------</span></div><div class="line"></div><div class="line">a = pd.DataFrame([[[<span class="number">1</span>]]])</div><div class="line">print(a.loc[<span class="number">0</span>][<span class="number">0</span>])</div><div class="line"></div><div class="line">b = a.copy()</div><div class="line">b.loc[<span class="number">0</span>,<span class="number">0</span>][<span class="number">0</span>] = <span class="number">2</span></div><div class="line">print(b.loc[<span class="number">0</span>, <span class="number">0</span>]) <span class="comment"># [2]</span></div><div class="line">print(a.loc[<span class="number">0</span>, <span class="number">0</span>]) <span class="comment"># [2]</span></div><div class="line"></div><div class="line">print(a.loc[<span class="number">0</span>,<span class="number">0</span>] <span class="keyword">is</span> b.loc[<span class="number">0</span>,<span class="number">0</span>])  <span class="comment"># True</span></div><div class="line">print(id(a.loc[<span class="number">0</span>,<span class="number">0</span>]) == id(b.loc[<span class="number">0</span>,<span class="number">0</span>])) <span class="comment"># True</span></div></pre></td></tr></table></figure>
<p>神奇…</p>
<hr>
<p><strong>18.8.10：</strong></p>
<p>​    之前发现了问题之后去GitHub上提了<a href="https://github.com/pandas-dev/pandas/issues/22203" target="_blank" rel="external">Issues</a>，前几天收到了一位pandas的contributor的回复：</p>
<img src="http://7xugq7.com1.z0.glb.clouddn.com/pd_issues.png">
<hr>
<p><strong>18.8.13:</strong></p>
<p>​    又得到了另一位开发者的回复，他指出首先.copy(deep=True)在<a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.copy.html" target="_blank" rel="external">官方文档</a>上已经写到了这一点：</p>
<blockquote>
<p>When deep=True, data is copied but actual Python objects will not be copied recursively, only the reference to the object. This is in contrast to copy.deepcopy in the Standard Library, which recursively copies object data (see examples below).</p>
</blockquote>
<p>他还指出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id(a.loc[<span class="number">0</span>,<span class="number">0</span>]) == id(b.loc[<span class="number">0</span>,<span class="number">0</span>])</div></pre></td></tr></table></figure>
<p>这个语句中，</p>
<blockquote>
<p>the Python interpreter could perform the following steps:</p>
<ol>
<li>Evaluate <code>a.loc[0, 0]</code>; then</li>
<li>Get the id of the temporary object created in step 1; then</li>
<li>Evaluate <code>b.loc[0, 0]</code>; then</li>
<li>Get the id of the temporary object created in step 3.</li>
</ol>
<p>If the temporary object created in step 1 is GC’ed in between, the temporary object created in step 3 may be created at the same address. (In CPython, the <code>id</code> function <a href="https://docs.python.org/3/library/functions.html#id" target="_blank" rel="external">returns the memory address</a> of an object, although this is considered a CPython implementation detail.)</p>
<p>One case see examples of this just using plain old Python objects:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; In [13]: id(object()), id(object())</div><div class="line">&gt; Out[13]: (4763425312, 4763425312)</div><div class="line">&gt;</div><div class="line">&gt; In [19]: print(object() is object())</div><div class="line">&gt; False</div><div class="line">&gt;</div><div class="line">&gt; In [20]: print(id(object()) == id(object()))</div><div class="line">&gt; True</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>后来，我又去尝试了一下copy.deepcopy()，发现即使是这个方法，依然不能达到我想要的效果。再次Google之后得到的答案是，只能乖乖地把index和value分别做deepcopy，然后再构造一个新的DataFrame。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://gabrieldrapor.github.io/2018/08/05/180805_pd_deepcopy/" data-id="cjm7dw34u005j7p8hd14gjjmw" class="article-share-link" data-share="baidu" data-title="关于pandas.DataFrame.copy()的小坑">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/13/180813_py_udf/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          用python实现Hive UDF
        
      </div>
    </a>
  
  
    <a href="/2018/07/11/180711_pd_SettingWithCopyWarning/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">关于SettingWithCopyWarning</div>
    </a>
  
</nav>

  
</article>

</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">按标签</h3>
    <div class="widget tagcloud">
      <a href="/tags/Codewars/" style="font-size: 11.43px;">Codewars</a> <a href="/tags/Crawler/" style="font-size: 11.43px;">Crawler</a> <a href="/tags/Data-Structures-and-Algorithms/" style="font-size: 11.43px;">Data Structures and Algorithms</a> <a href="/tags/Flask/" style="font-size: 10px;">Flask</a> <a href="/tags/Hardware/" style="font-size: 10px;">Hardware</a> <a href="/tags/Kaggle/" style="font-size: 10px;">Kaggle</a> <a href="/tags/Machine-Learning/" style="font-size: 15.71px;">Machine Learning</a> <a href="/tags/MongoDB/" style="font-size: 11.43px;">MongoDB</a> <a href="/tags/Networks/" style="font-size: 14.29px;">Networks</a> <a href="/tags/Paths/" style="font-size: 17.14px;">Paths</a> <a href="/tags/Plans/" style="font-size: 20px;">Plans</a> <a href="/tags/Python/" style="font-size: 18.57px;">Python</a> <a href="/tags/SQL/" style="font-size: 12.86px;">SQL</a> <a href="/tags/Server/" style="font-size: 12.86px;">Server</a> <a href="/tags/TensorFlow/" style="font-size: 10px;">TensorFlow</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">　</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Gabriel Drapor<br>
      Powered by Hexo
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about-me" class="mobile-nav-link">About me</a>
  
    <a href="/2018-reading-list" class="mobile-nav-link">Reading List</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    }); 
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
